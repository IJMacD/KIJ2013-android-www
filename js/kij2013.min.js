var KIJ2013=function(){var a={},b="preferences";return{db:null,init:function(c){if(!window.openDatabase){$("#body").html("<p>Sorry Support for your device is not ready yet. Please try again in the future.</p>");return}this.db=window.openDatabase("KIJ2013","1.0","KIJ2013 Database",256*1024);this.sql("CREATE TABLE IF NOT EXISTS `"+b+"` (`key` varchar(255) PRIMARY KEY,`value` varchar(255))");this.sql("SELECT key,value FROM "+b,[],function(d,f){for(var e=0;e<f.rows.length;e++){var g=f.rows.item(e);a[g.key]=g.value}if(typeof c=="function"){c()}})},sql:function(d,c,e){if(typeof e=="function"){this.db.readTransaction(function(f){f.executeSql(d,c,e)})}else{this.db.transaction(function(f){f.executeSql(d,c)})}},getPreference:function(c){return a[c]},setPreference:function(c,d){a[c]=d;this.sql("INSERT OR REPLACE INTO "+b+"(key,value) VALUES (?,?)",[c,d])},setActionBarUp:function(c){if(typeof c=="function"){$("#up-button").removeAttr("href").unbind().click(function(){c();return false})}else{if(typeof c=="string"){$("#up-button").unbind().attr("href",c)}}},setActionBarTitle:function(c){$("#action_bar h1").text(c)},showLoading:function(){$("<div/>").attr("id","loading").text("Loading").append($("<img/>").attr("src","ajax-loader.gif")).appendTo("#body")},showError:function(d){var c=$("#popup");c.text(d).show();setTimeout(function(){c.slideUp("normal")},5000)}}}();